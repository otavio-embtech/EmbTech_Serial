{
    "version": "1.4",
    "modbus_required": false,
    "fast_mode_code": "5004",
    "steps": [
        {
            "nome": "Serão necessario",
            "checked_for_fast_mode": false,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Uma fonta 12Vdc, Um modulo fibocom, um modulo simcom, um simcard, um conversor serial, um conversor RS485 um modulo can, um pendrive, um modulo XBEE e o kit de teste",
            "caminho_imagem": ""
        },
        {
            "nome": "Instrução",
            "checked_for_fast_mode": false,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Deixe conectado, o display, o borne com curto em CN8, o Pendrive em CN4, o simcard em CN9 o modulo fibocom em CN10, o conversor Serial em CN3, o modulo handheld em CN5 e RS-485 em CN7.",
            "caminho_imagem": ""
        },
        {
            "nome": "Verifique o Hardware",
            "checked_for_fast_mode": false,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Verifique com o multimetro se há continuidade entre V+ e V-",
            "caminho_imagem": ""
        },
        {
            "nome": "Alimente a placa",
            "checked_for_fast_mode": true,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Alimente a placa com 12Vdc, no conector CN1. Os leds DS6 e DS7 devem ficar piscando.",
            "caminho_imagem": ""
        },
        {
            "nome": "Conecte o conversor serial",
            "checked_for_fast_mode": true,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Conecte o conversor serial no CN3. Os leds DS6 e DS7 irão ficar piscando rapidamente.",
            "caminho_imagem": ""
        },
        {
            "nome": "Modo de teste",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_TEST=ON;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "Test mode ON..."
        },
        {
            "nome": "Gravar N° de serie",
            "checked_for_fast_mode": true,
            "tipo_passo": "gravar_numero_serie",
            "comando_modelo": "SET_NS=XXXXX/XXX;"
        },
        {
            "nome": "Setar horario",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "",
            "esperar_resposta": false,
            "timeout_ms": 0,
            "tipo_validacao": "nenhuma",
            "use_rtc": true,
            "rtc_mode": "Escrita",
            "rtc_pattern": "SET_RTC=YYYY-MM-DD HH:MM:SS;"
        },
        {
            "nome": "Aguarde 5 segundos",
            "checked_for_fast_mode": true,
            "tipo_passo": "tempo_espera",
            "duracao_espera_segundos": 5
        },
        {
            "nome": "Ler horario",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "datetime_20s",
            "use_rtc": true,
            "rtc_mode": "Leitura",
            "rtc_pattern": "SET_RTC=YYYY-MM-DD HH:MM:SS;",
            "param_validacao": {}
        },
        {
            "nome": "Leitura de Firmware",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_FIRMW;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "Firmware Version = 0.0.1r"
        },
        {
            "nome": "Setar 3v3 LOW",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_3V3_P=OFF;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "3.3V P OFF!"
        },
        {
            "nome": "Setar 5V LOW",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_5V_P=OFF;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "5V P OFF!"
        },
        {
            "nome": "Setar 5V HIGH",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_5V_P=ON;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "5V P ON!"
        },
        {
            "nome": "Setar 3v3 HIGH",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_3V3_P=ON;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "3.3V P ON!"
        },
        {
            "nome": "Desligar tensões secundarias",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_PWR_SWITCH=OFF;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "POWER SWITCHES OFF!"
        },
        {
            "nome": "Desligando tensões secundarias",
            "checked_for_fast_mode": true,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Verifique se os LEDS DS8, DS9, DS12, DS19, DS30 Desligaram.",
            "caminho_imagem": ""
        },
        {
            "nome": "Ligando tensões secundarias",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_PWR_SWITCH=ON;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "POWER SWITCHES ON!"
        },
        {
            "nome": "Ligando tensões secundarias",
            "checked_for_fast_mode": true,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Verfique se os LEDS DS8, DS9, DS12, DS19 e DS30 Ligaram.",
            "caminho_imagem": ""
        },
        {
            "nome": "Teste das tensões de saida das fontes",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_PWR_SWITCH_OC;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PCIE POWER SWITCH OK!\nRADIO POWER SWITCH OK!\nCAN POWER SWITCH OK|\nUSB POWER SWITCH OK!\nEXPANSION POWER SWITCH OK!"
        },
        {
            "nome": "Teste de modulo PCIE com fibocom",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "TEST_AT_UART2;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PCIE UART2 COM OK!"
        },
        {
            "nome": "Teste de Rede CAN",
            "checked_for_fast_mode": false,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_CAN_TEST;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "CAN test command sent..."
        },
        {
            "nome": "Teste de rede can",
            "checked_for_fast_mode": false,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_CAN_TEST;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "CAN test OK!"
        },
        {
            "nome": "Instrução",
            "checked_for_fast_mode": true,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Troque o modulo fibocom em CN10 por um modulo simcom.",
            "caminho_imagem": ""
        },
        {
            "nome": "Verificação entrada digital 1",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_PWR_IN1;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PWR IN1 = OFF"
        },
        {
            "nome": "Verificação entrada digital 2",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_PWR_IN2;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PWR IN2 = OFF"
        },
        {
            "nome": "Verificação entrada digital 3",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_PWR_IN3;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PWR IN3 = OFF"
        },
        {
            "nome": "Verificação entrada digital 4",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_PWR_IN4;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PWR IN4 = OFF"
        },
        {
            "nome": "Teste de Escritura em USB",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "TEST_USB;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "This is STM32 working with FatFs. (Bytes:34)\nTest OK!"
        },
        {
            "nome": "Teste de memoria",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "TEST_EMMC;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "This is STM32 working with FatFs. (Bytes:34)\nTest OK!"
        },
        {
            "nome": "Formatação da memoria",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "FORMAT_EMMC;",
            "esperar_resposta": true,
            "timeout_ms": 10000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "Formatting OK!."
        },
        {
            "nome": "Teste de modulo PCIE com Simcom",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "TEST_AT_UART4;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PCIE UART4 COM OK!"
        },
        {
            "nome": "Teste do XBee",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "TEST_XBEE_UART5;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "XBEE UART COM OK!"
        },
        {
            "nome": "Teste de RS485",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "TESTE_UART_RS485;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "TESTE_OK->UART_RS485"
        },
        {
            "nome": "SET_KEYB_DEBUG=ON;",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "TEST_XBEE_UART5;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "KEYBOARD DEBUG ON!"
        },
        {
            "nome": "Teclado",
            "checked_for_fast_mode": true,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Pressione as microchaves e observer no monitor se as teclas pressionadas respondem com seguinte padrao (exemplo: S1 pressed; S1 released). Há uma janela de tempo de 10 Segundos para executar esse procedimento",
            "caminho_imagem": ""
        },
        {
            "nome": "Aguarde",
            "checked_for_fast_mode": true,
            "tipo_passo": "tempo_espera",
            "duracao_espera_segundos": 10
        },
        {
            "nome": "Desligar debug de teclado.",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "SET_KEYB_DEBUG=OFF;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "KEYBOARD DEBUG OFF!"
        },
        {
            "nome": "Teste de temperatura da placa",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_SHT40;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "texto_numerico_simples",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": {
                "simplified_text": "SHT40: Temp: [VALOR]",
                "regex": "SHT40:\\ Temp:\\ \\s*([-+]?\\d*\\.?\\d+)\\s*",
                "min": 20.0,
                "max": 39.0
            }
        },
        {
            "nome": "Remova o Borne",
            "checked_for_fast_mode": true,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Remova o conector em CN8",
            "caminho_imagem": ""
        },
        {
            "nome": "Verificação entrada digital 1",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_PWR_IN1;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PWR IN1 = ON"
        },
        {
            "nome": "Verificação entrada digital 2",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_PWR_IN2;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PWR IN2 = ON"
        },
        {
            "nome": "Verificação entrada digital 3",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_PWR_IN3;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PWR IN3 = ON"
        },
        {
            "nome": "Verificação entrada digital 4",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_PWR_IN4;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "string_exata",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": "PWR IN4 = ON"
        },
        {
            "nome": "Desligue a placa.",
            "checked_for_fast_mode": true,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Desligue a placa",
            "caminho_imagem": ""
        },
        {
            "nome": "Aguarde",
            "checked_for_fast_mode": true,
            "tipo_passo": "tempo_espera",
            "duracao_espera_segundos": 5
        },
        {
            "nome": "Ligue a placa",
            "checked_for_fast_mode": true,
            "tipo_passo": "instrucao_manual",
            "mensagem_instrucao": "Ligue a placa.",
            "caminho_imagem": ""
        },
        {
            "nome": "Ler NS",
            "checked_for_fast_mode": true,
            "tipo_passo": "comando_validacao",
            "port_type": "serial",
            "comando_enviar": "READ_NS;",
            "esperar_resposta": true,
            "timeout_ms": 1000,
            "tipo_validacao": "serial_settings_match",
            "use_rtc": false,
            "rtc_mode": "",
            "rtc_pattern": "",
            "param_validacao": {}
        }
    ],
    "port_configurations": {
        "serial_command": {
            "baud": "9600",
            "data_bits": "8",
            "parity": "Nenhuma",
            "handshake": "Nenhum",
            "mode": "Free"
        },
        "modbus": {
            "baud": "9600",
            "data_bits": "8",
            "parity": "Nenhuma",
            "handshake": "Nenhum",
            "mode": "Free"
        }
    }
}